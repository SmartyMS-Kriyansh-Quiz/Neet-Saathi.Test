<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Leaderboard – BIOLOGY DPP-02</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f4f6f9; }
    header { background:#222; color:#fff; padding:15px; text-align:center; }
    header h2 { margin:0; }
    .container { max-width:900px; margin:20px auto; background:#fff; padding:20px; border-radius:10px; }
    table { width:100%; border-collapse: collapse; margin-top:20px; }
    th, td { border:1px solid #ccc; padding:10px; text-align:center; }
    th { background:#007bff; color:#fff; }
    button { background:#007bff; color:#fff; padding:10px 20px; border:none; border-radius:8px; cursor:pointer; margin-top:20px; }
    .no-data { text-align:center; padding:20px; color:#777; }
  </style>
</head>
<body>
  <header>
    <h2>Leaderboard – BIOLOGY DPP-02</h2>
  </header>
  <div class="container">
    <table id="leaderboardTable">
      <thead>
        <tr>
          <th>Rank</th>
          <th>Name</th>
          <th>DOB</th>
          <th>Marks</th>
          <th>Percentage</th>
        </tr>
      </thead>
      <tbody id="leaderboardBody">
        <tr><td colspan="5" class="no-data">Loading...</td></tr>
      </tbody>
    </table>
    <button onclick="goBack()">Back to Test</button>
  </div>

  <script>
    const leaderboardBody = document.getElementById("leaderboardBody");

    window.addEventListener("load", () => {
      let leaderboard = JSON.parse(localStorage.getItem("leaderboard") || "[]");

      if(leaderboard.length === 0){
        leaderboardBody.innerHTML = `<tr><td colspan="5" class="no-data">No entries yet.</td></tr>`;
        return;
      }

      // Sort by marks descending
      leaderboard.sort((a, b) => b.marks - a.marks);

      let content = "";
      leaderboard.forEach((entry, index) => {
        content += `
          <tr>
            <td>${index + 1}</td>
            <td>${entry.name}</td>
            <td>${entry.dob}</td>
            <td>${entry.marks}</td>
            <td>${entry.percentage}%</td>
          </tr>
        `;
      });

      leaderboardBody.innerHTML = content;
    });

    function goBack(){
      if(confirm("Are you sure you want to go back? You can't retake the test.")){
        localStorage.setItem("testCompleted", "true");
        window.location.href = "index.html";
      }
    }
  </script>
</body>
</html>
